<style>
  .header-wrap{
    max-width: 980px;
    margin: 18px auto 0;
    padding: 0 16px;
    font-family: "Patrick Hand", cursive;
  }

  .topbar{
    padding:16px 20px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    background:#ffffff;
  }

  .left, .right{
    display:flex;
    align-items:center;
    gap:18px;
  }

  /* ğŸŸ£ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† */
  .brand a{
    font-weight:900;
    letter-spacing:1px;
    font-size:22px;
    text-decoration:none;
     color:#0e2962;
  }

  /* ğŸŸ£ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø¨Ø¯ÙˆÙ† Ø¥Ø·Ø§Ø± */
  .icon-btn{
    background:transparent;
    border:none;
    cursor:pointer;
    font-size:22px;
    position:relative;
    color:#000;
    transition: all .2s ease;
  }

  .icon-btn:hover{
    transform: scale(1.1);
  }

  /* ğŸŸ£ badge */
  .badge{
    position:absolute;
    top:-8px;
    right:-10px;
    min-width:20px;
    height:20px;
    padding:0 6px;
    border-radius:999px;
     background:#0e2962;
    color:#fff;
    font-size:12px;
    font-weight:800;
    display:flex;
    align-items:center;
    justify-content:center;
  }

  .dropdown{
    position:relative;
  }

  .menu{
    position:absolute;
    top:40px;
    left:0;
    width:190px;
    background:#fff;
    border-radius:12px;
    padding:8px;
    box-shadow: 0 10px 30px rgba(0,0,0,.08);
    display:none;
    z-index:50;
  }

  .menu.show{ display:block; }

  .menu a{
    display:block;
    padding:10px;
    border-radius:10px;
    text-decoration:none;
     color:#0e2962;
    font-weight:600;
  }

  .menu a:hover{
    background:#f3f4f6;
  }

  .menu form{ margin:0; }

  .menu button{
    width:100%;
    text-align:left;
    padding:10px;
    border-radius:10px;
    border:none;
    background:transparent;
    cursor:pointer;
    font-weight:700;
  }

  .menu button:hover{
    background:#f3f4f6;
  }


  .searchbar{
    margin-top:14px;
    border-radius:20px;
    padding:12px 16px;
    display:flex;
    align-items:center;
    gap:10px;
    background:#f3f4f6;
  }

  .searchbar input{
    width:100%;
    border:none;
    outline:none;
    background:transparent;
    font-size:15px;
    font-family: "Patrick Hand", cursive;
  }

  .searchbar button{
    border:none;
    background:transparent;
    cursor:pointer;
    font-size:18px;
    color:#000;
  }
  .icon-btn img{
  width:22px;
  height:22px;
  object-fit:contain;
}
</style>

<div class="header-wrap">

  <div class="topbar">

    <div class="left">
      <div class="dropdown">
        <button class="icon-btn" type="button" onclick="toggleMenu('catMenu')">â˜°</button>

        <div id="catMenu" class="menu">
          <a href="/products?category=Skincare">Skin Care</a>
          <a href="/products?category=Haircare">Hair care</a>
          <a href="/products?category=Nails">Nails</a>
          <a href="/products?category=Vitamins">Vitamins</a>
        </div>
      </div>
    </div>

    <div class="brand">
      <a href="/">BLOOM PHARMACY</a>
    </div>

    <div class="right">

      <a class="icon-btn" href="/cart" aria-label="Cart">
        ğŸ›’
        <% if (cartCount && cartCount > 0) { %>
          <span class="badge"><%= cartCount %></span>
        <% } %>
      </a>

      <div class="dropdown">
        <button class="icon-btn" type="button" onclick="toggleMenu('profileMenu')" aria-label="Profile"><img src="/images/user.png" alt=""></button>

        <div id="profileMenu" class="menu" style="left:auto; right:0;">
          <% if (!user) { %>
            <a href="/auth/sign-in">Sign In</a>
            <a href="/auth/sign-up">Sign Up</a>
          <% } else { %>
            <a href="/users/profile">Profile</a>
            <a href="/auth/sign-out">Sign Out</a>
          <% } %>
        </div>
      </div>

    </div>
  </div>

  <form class="searchbar" action="/products" method="GET">
    <input type="text" name="q" placeholder="Search products..." />
    <button type="submit">ğŸ”ï¸</button>
  </form>

</div>

<script>
  function toggleMenu(id){
    const el = document.getElementById(id)
    if(!el) return
    el.classList.toggle("show")
  }

  document.addEventListener("click", (e) => {
    const catMenu = document.getElementById("catMenu")
    const profileMenu = document.getElementById("profileMenu")

    if (catMenu && !e.target.closest(".dropdown")) catMenu.classList.remove("show")
    if (profileMenu && !e.target.closest(".dropdown")) profileMenu.classList.remove("show")
  })
</script>
